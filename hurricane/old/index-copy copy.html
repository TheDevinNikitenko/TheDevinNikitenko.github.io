<!DOCTYPE html>
<html>
<head>
    <title>Leaflet SHP Loader</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://github.com/calvinmetcalf/shapefile-js"></script>

</head>
<body>
    <!-- Create an Input Element to Select SHP File -->
    <input type="file" id="shp-file" accept=".zip,.shp" />

    <!-- Create a Leaflet Map -->
    <div id="map" style="height: 400px;"></div>

    <!-- JavaScript to Load and Display SHP File -->
    <script>
        // Initialize the Leaflet map
        var map = L.map('map').setView([51.505, -0.09], 13);

        // Add a default OpenStreetMap layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        document.getElementById('shp-file').addEventListener('change', function (event) {
    var file = event.target.files[0];

    if (file) {
      var reader = new FileReader();

      reader.onload = function (e) {
        var shpBuffer = e.target.result;
        var shpData = new shapefile.ArrayBufferShp(shpBuffer);

        shpData.read().then(function (geojson) {
          L.geoJSON(geojson).addTo(map);
        });
      };

      reader.readAsArrayBuffer(file);
    }
  });
    </script>
</body>
</html>
